<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¯€èƒ½å°‹å¯¶è¨˜ - ç¬¬äº”é—œ</title>
  <style>
    body {
      background: #e6ffe6;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    #instruction-screen {
      background: #ffffff;
      border: 2px solid #99cc99;
      border-radius: 10px;
      padding: 20px;
      max-width: 500px;
      margin: 40px auto;
    }
    #instruction-screen h2 {
      color: #006600;
    }
    #start-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background-color: #33cc33;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #instruction {
      font-size: 20px;
      color: #006600;
      margin-bottom: 20px;
    }
    #maze {
      display: none;
      grid-template-columns: repeat(10, 40px);
      grid-template-rows: repeat(10, 40px);
      gap: 2px;
      margin: 0 auto;
      width: max-content;
    }
    .cell {
      width: 40px;
      height: 40px;
      background: #ccffcc;
      border: 1px solid #99cc99;
      position: relative;
    }
    .wall { background: #666; }
    .player { background: #33cc33; }
    .goal { background: gold; }
    .tip { background: #cce5ff; cursor: help; }
    #tip-box {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffff;
      border: 2px solid #3399ff;
      padding: 10px 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 10;
      color: #003366;
      font-weight: bold;
    }
    #congrats {
      display: none;
      font-size: 26px;
      color: #006600;
      margin-top: 30px;
      font-weight: bold;
    }
    #ending-screen {
      display: none;
      margin-top: 20px;
      padding: 30px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    #ending-screen h2 {
      font-size: 28px;
      color: #004d00;
    }
    #ending-screen p {
      font-size: 18px;
      color: #333;
      margin-top: 15px;
    }
  </style>
</head>
<body>

  <h1>ç¯€èƒ½å°‹å¯¶è¨˜ - ç¬¬äº”é—œ</h1>

  <!-- éŠæˆ²èªªæ˜ -->
  <div id="instruction-screen">
    <h2>éŠæˆ²èªªæ˜</h2>
    <p>1. é€™æ˜¯äº’å‹•é¡Œçš„é—œå¡ã€‚</p>
    <p>2. å¹«å°ç¶ æ‰¾åˆ°ç¯€èƒ½ä¹‹è·¯ï¼ä½¿ç”¨éµç›¤æ–¹å‘éµç§»å‹•ã€‚</p>
    <p>3. åˆ°é”çµ‚é» (é»ƒè‰²è‰²å¡Š) å³å¯éé—œã€‚</p>
    <button id="start-button">é–‹å§‹éŠæˆ²</button>
  </div>

  <!-- éŠæˆ²å€ -->
  <div id="instruction">å¹«å°ç¶ æ‰¾åˆ°ç¯€èƒ½ä¹‹è·¯ï¼ä½¿ç”¨éµç›¤æ–¹å‘éµç§»å‹•ã€‚</div>
  <div id="maze"></div>

  <div id="tip-box"></div>
  <div id="congrats">æ­å–œä½ å®Œæˆç¯€èƒ½å†’éšªä¹‹è·¯ï¼ğŸŒ±</div>

  <div id="ending-screen">
    <h2>ğŸ‰ æ­å–œä½ é€šé—œæˆåŠŸï¼</h2>
    <p>ä½ å¹«åŠ©å°ç¶ å®Œæˆäº†æ‰€æœ‰ç¯€èƒ½ä»»å‹™ï¼Œä¹Ÿå­¸æœƒäº†è¨±å¤šç¯€ç´„èƒ½æºçš„å°çŸ¥è­˜ã€‚<br>è®“æˆ‘å€‘ä¸€èµ·ç¹¼çºŒç‚ºåœ°çƒåŠªåŠ›ï¼Œå‰µé€ æ›´ç¾å¥½çš„æœªä¾†å§ï¼</p>
  </div>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="bg-music" src="images/Backgroundmusic.mp3" loop></audio>

  <script>
    const startButton = document.getElementById('start-button');
    const instructionScreen = document.getElementById('instruction-screen');
    const maze = document.getElementById('maze');
    const bgMusic = document.getElementById('bg-music');

    const mazeLayout = [
      "##########",
      "#P  T#  T#",
      "### ## # #",
      "#  T  # T#",
      "# ##### ##",
      "# T   #  #",
      "## ### ###",
      "#  T#    #",
      "#T#  T## #",
      "#   #   G#"
    ];

    const tips = {
      '1,4': 'è¨˜å¾—éš¨æ‰‹é—œç‡ˆï¼Œç¯€çœèƒ½æºï¼',
      '1,8': 'ä½¿ç”¨ç¯€èƒ½ç‡ˆæ³¡æ›´çœé›»åˆç’°ä¿ï¼',
      '3,3': 'ç©ºèª¿è¨­å®š26-28åº¦æœ€ç¯€èƒ½ï¼',
      '3,8': 'é•·æ™‚é–“ä¸ä½¿ç”¨é›»å™¨æ™‚è¨˜å¾—æ‹”æ’é ­ï¼',
      '5,2': 'é›»è…¦ä¸ä½¿ç”¨æ™‚è¨˜å¾—é—œæ©Ÿæˆ–ç¡çœ æ¨¡å¼ï¼',
      '7,3': 'ä½¿ç”¨è‡ªç„¶å…‰ä»£æ›¿ç™½å¤©é–‹ç‡ˆï¼',
      '8,1': 'æ‹”æ‰ä¸ä½¿ç”¨çš„å……é›»å™¨ï¼Œé¿å…è€—é›»ï¼',
      '8,5': 'æ´—è¡£æ©Ÿæ»¿è¼‰é‹è½‰æœ€ç¯€èƒ½å–”ï¼'
    };

    let playerX = 1;
    let playerY = 1;

    function drawMaze() {
      maze.innerHTML = '';
      maze.style.display = 'grid';
      for (let y = 0; y < 10; y++) {
        for (let x = 0; x < 10; x++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          const posKey = `${y},${x}`;

          if (mazeLayout[y][x] === '#') {
            cell.classList.add('wall');
          } else if (x === playerX && y === playerY) {
            cell.classList.add('player');
          } else if (mazeLayout[y][x] === 'G') {
            cell.classList.add('goal');
          } else if (mazeLayout[y][x] === 'T') {
            cell.classList.add('tip');
            cell.title = tips[posKey] || 'ç¯€èƒ½å°æç¤º';
          }

          maze.appendChild(cell);
        }
      }
    }

    function move(dx, dy) {
      const newX = playerX + dx;
      const newY = playerY + dy;
      if (newY < 0 || newY >= 10 || newX < 0 || newX >= 10) return;

      const nextCell = mazeLayout[newY][newX];

      if (nextCell !== '#') {
        playerX = newX;
        playerY = newY;
        drawMaze();
        checkGoal();
        checkTip();
      }
    }

    function checkGoal() {
      if (mazeLayout[playerY][playerX] === 'G') {
        document.getElementById('congrats').style.display = 'block';
        document.getElementById('ending-screen').style.display = 'block';
      }
    }

    function checkTip() {
      const key = `${playerY},${playerX}`;
      if (tips[key]) {
        const tipBox = document.getElementById('tip-box');
        tipBox.textContent = tips[key];
        tipBox.style.display = 'block';
        setTimeout(() => {
          tipBox.style.display = 'none';
        }, 3000);
      }
    }

    document.addEventListener('keydown', e => {
      if (maze.style.display === 'none') return; // é¿å…æœªé–‹å§‹å°±ç§»å‹•
      if (e.key === 'ArrowUp') move(0, -1);
      else if (e.key === 'ArrowDown') move(0, 1);
      else if (e.key === 'ArrowLeft') move(-1, 0);
      else if (e.key === 'ArrowRight') move(1, 0);
    });

    startButton.addEventListener('click', () => {
      instructionScreen.style.display = 'none';
      document.getElementById('instruction').style.display = 'block';
      bgMusic.play();
      drawMaze();
    });
  </script>

</body>
</html>
